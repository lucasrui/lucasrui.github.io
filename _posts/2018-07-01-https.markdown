---
layout: post
title:  "https原理"
date:   2018-07-01 14:00:00 +0800
categories: 网络
---
## https涉及到的主题
* 客户端
* 服务端
* CA机构

## https认证流程
1. 客户端访问服务端
2. 服务端下发服务器证书
3. 客户端向“受信任的CA机构”询问，证书是否受信任
4. 随机生成客户端RSA公私钥、会话秘钥
5. 客户端将客户端RSA公钥和会话秘钥用服务端公钥加密后发送给服务端
6. 服务端用服务端私钥将数据解密，得到客户端公私钥和会话秘钥
7. 随机生成服务端会话秘钥，并用客户端公钥加密返回给客户端
8. 客户端使用客户端私钥，解密得到服务端会话秘钥
9. 两者之间通过会话秘钥进行通讯，两者存有彼此的会话秘钥。（服务端发送数据用服务端会话秘钥加密，客户端用服务端会话秘钥解密）

## https与http的对比
1. http明文传输。https加密（对称加密）传输，https可以保证所传输数据的私密性和完整性
2. https采用加密通讯，更耗费服务器资源

## 补充
### RSA非对称加密原理
可以参考[https://baike.baidu.com/item/非对称加密算法](https://baike.baidu.com/item/非对称加密算法)
### https使用会话秘钥进行对称加密
非对称加密相对复杂度更高，在传输过程中，对称加密可以节省计算资源
### ssl
ssl全称secure socket layer，安全套接层，后来还有升级版本tls（Transport Layer Security传输层安全），他们在传输层对网络连接进行加密。https与http的区别主要就是多了一层ssl。
