---
layout: post
title:  "foreach的实质"
date:   2018-07-03 17:00:00 +0800
categories: Java基础
---
实质：foreach其实只是一种语法糖，本质还是使用了Iterator进行遍历。   
Oracle官网有关于foreach引入的说明[https://docs.oracle.com/javase/8/docs/technotes/guides/language/foreach.html](https://docs.oracle.com/javase/8/docs/technotes/guides/language/foreach.html)   
foreach循环仅应用于实现了Iterable接口的Java array和Collection类，而且既然所有内置Collection类都实现了java.util.Collection接口，已经继承了Iterable，这一细节通常会被忽略,这点可以在Collection接口的类型声明“ public interface Collection extends Iterable”中看到。所以为了解决上述问题，你可以选择简单地让CustomCollection实现Collection接口或者继承AbstractCollection，这是默认的通用实现并展示了如何同时使用抽象类和接口以获取更好的灵活性。   
**在java doc注释中也有说明实现Iterable接口，即可使用for-each loop**
```java
/**
 * Implementing this interface allows an object to be the target of
 * the "for-each loop" statement. See
 * <strong>
 * <a href="{@docRoot}/../technotes/guides/language/foreach.html">For-each Loop</a>
 * </strong>
 *
 * @param <T> the type of elements returned by the iterator
 *
 * @since 1.5
 * @jls 14.14.2 The enhanced for statement
 */
public interface Iterable<T> {...}
```

